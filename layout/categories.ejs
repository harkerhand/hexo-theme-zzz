<%
page.title = theme.category && theme.category.title || '分类'
page.subtitle = theme.category && theme.category.subtitle || '文章分类'
page.banner_img = theme.category && theme.category.banner_img || theme.default_cover_image
%>

<!-- Banner -->
<div class="banner" style="background-image: url('<%= page.banner_img %>');">
  <div class="banner-content">
    <h1 class="banner-title"><%= page.title %></h1>
    <% if (page.subtitle) { %>
      <p class="banner-subtitle"><%= page.subtitle %></p>
    <% } %>
  </div>
</div>

<!-- Categories Content -->
<div class="content-container">
  <div class="category-list">
    <% site.categories.each(function(category) { %>
      <% if (category.posts.length > 0) { %>
        <div class="category-item">
          <h3 class="category-name">
            <a href="<%= url_for(category.path) %>">
              <%= category.name %>
              <span class="category-count">(<%= category.posts.length %>)</span>
            </a>
          </h3>
          <div class="category-posts">
            <% category.posts.sort('date', -1).limit(5).each(function(post) { %>
              <div class="category-post">
                <a href="<%= url_for(post.path) %>"><%= post.title %></a>
                <span class="post-date"><%= date(post.date, 'MM-DD') %></span>
              </div>
            <% }); %>
            <% if (category.posts.length > 5) { %>
              <div class="category-more">
                <a href="<%= url_for(category.path) %>">查看更多 (<%= category.posts.length - 5 %>)</a>
              </div>
            <% } %>
          </div>
        </div>
      <% } %>
    <% }); %>
  </div>
</div>
